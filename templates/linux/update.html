<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加linux主机</title>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
     <style type="text/css">
        .first {
            background-color: #007bff;;
            font-size: 1rem;
            border: 0;
            padding: 8px 25px;
            border-radius: 15px;
            height: 40px;
            text-rendering: auto;
        }
    </style>
</head>
{% extends "base.html" %}
{% load staticfiles %}
{% block content %}
<body>
<div class="container">
    <div class="row">
        <div class="col-3">
        <br>
            <!-- 提交文章的表单 -->
            <form id="testform" method="post" action="#" enctype="multipart/form-data">
            <!-- Django中需要POST数据的地方都必须有csrf_token -->
                {% csrf_token %}
            <div class="form-group">
                <label>服务器名称</label>
                <input type="text" class="form-control" id="linux_name" name="linux_name" value="{{ linux.linux_name }}">
            </div>
            <div class="form-group">
                <label>主机IP地址</label>
                <input type="text" class="form-control" id="linux_ip" name="linux_ip" value="{{ linux.linux_ip }}">
            </div>
            <div class="form-group">
                <label>SSH端口</label>
                <input type="text" class="form-control" id="linux_port" name="linux_port" value="{{ linux.linux_port }}">
            </div>
            <div class="form-group">
                <label>用户名</label>
                <input type="text" class="form-control" id="linux_user" name="linux_user" value="{{ linux.linux_user }}">
            </div>
            <div class="form-group">
                <label>密码</label>
                <input type="password" class="form-control" id="linux_passwd" name="linux_passwd" value="{{ linux.linux_passwd }}">
            </div>
            <!-- 测试按钮 -->
{#                <input type="button" class="ajax_test" value="测试连接"></input>#}
                <button type="button" class="btn btn-success" id="ajax_test">测试连接</button>
{#                <span id="test"></span>#}
            <!-- 提交按钮 -->
                <br>
                <br>
                <button type="submit" class="btn btn-success">更新</button>
            </form>
        </div>
    </div>
</div>
<script>
    $('#ajax_test').click(function () {
        $.ajax({
            url: '/test/',
            type:'POST',
            data:$('#testform').serialize(),
            async:true,
            success:function (data) {
                alert(data);
                console.info(data);
                {#$('#ajax_test').html(data)#}
            }
            })
    })
</script>
</body>
{% endblock content %}
</html>
